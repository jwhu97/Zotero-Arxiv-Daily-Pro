from typing import Optional
from functools import cached_property
from tempfile import TemporaryDirectory
import arxiv
import tarfile
import re
import time
from llm import get_llm, get_vision_llm
import requests
from requests.adapters import HTTPAdapter, Retry
from loguru import logger
import tiktoken
from contextlib import ExitStack
from urllib.error import HTTPError
import base64
import io
from PIL import Image
import subprocess
import os

# 导入图片分析模块
try:
    from image_analyzer import get_image_analyzer
except ImportError:
    logger.warning("图片分析模块不可用，将禁用图片提取功能")
    get_image_analyzer = None
